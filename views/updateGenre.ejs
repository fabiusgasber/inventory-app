<%- include("components/head") %>
<div class="page-title-and-action">
  <a href="/genre">Back to genres</a>
</div>
  <%- include("components/errors.ejs") %>
  <main>
  <form action="/genre/<%= genre.id %>/update" method="POST">
    <div class="form-row">
        <label for="genre">Genre title: </label>
        <input type="text" value="<%= genre.genre %>" name="genre" id="genre" required>
    </div>
        <div class="form-row">
        <label for="movies">Associated movies:</label>
        <select name="movies" id="movies" multiple required>
            <% movies.forEach(movie => { %>
                <% const isSelected = associatedMovies.some(am => am.movie === movie.id); %>
                <option value="<%= movie.id %>" <%= isSelected ? "selected" : "" %> ><%= movie.title %></option>
            <% }) %>
        </select>
        </div>
    <button type="submit">Update genre</button>
  </form>
  <form method="post" action="/genre/<%= genre.id %>/delete">
      <button type="submit">Delete</button>
  </form>
  </main>
</body>
</html>
