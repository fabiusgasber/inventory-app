<%- include("components/head") %>
<div class="page-title-and-action">
  <a href="/genre">Back to genres</a>
</div>
  <%- include("components/errors.ejs") %>
  <main>
  <form action="/genre/<%= genre.id %>/update" method="POST">
    <div class="form-row">
        <label for="title">Genre title: </label>
        <input type="text" value="<%= genre.genre %>" name="title" id="title" required>
    </div>
        <div class="form-row">
        <label for="movies">Associated movies:</label>
        <select name="movies" id="movies" multiple>
            <% movies.forEach(movie => { %>
                <% const isSelected = associatedMovies.some(am => am.movieid === movie.id); %>
                <option value="<%= movie.id %>" <%= isSelected ? "selected" : "" %> ><%= movie.title %></option>
            <% }) %>
        </select>
        </div>
      <div class="form-row">
          <a href="/genre/<%= genre.id %>">Cancel</a>
          <button type="submit">Submit</button>
      </div>
  </form>
  <form method="post" action="/genre/<%= genre.id %>/delete">
      <button type="submit" class="delete-btn">Delete</button>
  </form>
  </main>
</body>
</html>
